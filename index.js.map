{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport axios from 'axios';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nconst api = '6021301-359a47a130e708641e07d8eef';\nconst form = document.getElementById('search-form');\nconst searchbox = document.getElementById('searchbox');\nconst fetchButton = document.querySelector('.fetch-button');\nconst loader = document.querySelector('.loader');\nconst loaderAlt = document.querySelector('.loader-alt');\nconst containerGallery = document.querySelector('.portfolio-list');\nlet searchString = '';\nlet searchStringProcessed = '';\nlet page = 1;\nlet perPage = 20;\n\nsearchbox.addEventListener('input', evt => {\n  searchString = evt.target.value.trim();\n});\n\nconst galleryLightbox = new SimpleLightbox('.list-item-sp a', {\n  scrollZoom: false,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst resetImages = () => {\n  page = 1;\n  const imagesToRemove = document.querySelectorAll('.list-item-sp');\n  if (imagesToRemove.length > 0) {\n    imagesToRemove.forEach(imageToRemove => {\n      imageToRemove.remove();\n    });\n  }\n};\n\nconst updateStatus = totalHits => {\n  if (totalHits <= perPage * page) {\n    iziToast.error({\n      title: 'Error',\n      message: 'We are sorry, but you have reached the end of search results.!',\n    });\n  }\n  page++;\n};\n\nconst updateInterface = () => {\n  loader.classList.add('hidden');\n  loaderAlt.classList.add('hidden');\n};\n\n// const rows = () => {\n//   let total = 0;\n//   if (window.screen.width >= 1200) {\n//     total = Math.ceil(perPage / 3);\n//   } else if (window.screen.width >= 768 && window.screen.width < 1199) {\n//     total = Math.ceil(perPage / 2);\n//   } else {\n//     total = perPage;\n//   }\n//   return total;\n// };\n\nform.addEventListener('submit', evt => {\n  evt.preventDefault();\n  if (searchString.length > 1) {\n    resetImages();\n    loader.classList.remove('hidden');\n    searchStringProcessed = searchString.replaceAll(' ', '+');\n\n    fetchImages()\n      .then(images => {\n        updateInterface();\n        if (images.hits.length > 0) {\n          updateStatus(images.totalHits);\n          renderPosts(images.hits, true);\n        } else {\n          iziToast.error({\n            title: 'Error',\n            message:\n              'Sorry, there are no images matching your search query. Please try again!',\n          });\n        }\n      })\n      .catch(error => {\n        updateInterface();\n        console.log(error);\n      });\n  } else {\n    iziToast.error({\n      title: 'Error',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n  }\n});\n\nfetchButton.addEventListener('click', evt => {\n  evt.preventDefault();\n  loaderAlt.classList.remove('hidden');\n  fetchButton.classList.add('hidden');\n  fetchImages()\n    .then(images => {\n      updateInterface();\n      if (images.hits.length > 0) {\n        updateStatus(images.totalHits);\n        renderPosts(images.hits);\n      } else {\n        iziToast.error({\n          title: 'Error',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n      }\n    })\n    .catch(error => {\n      updateInterface();\n      console.log(error);\n    });\n});\n\nconst fetchImages = async () => {\n  const response = await axios.get(\n    `https://pixabay.com/api/?key=${api}&q=${searchStringProcessed}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${perPage}&page=${page}`\n  );\n  return response.data;\n};\n\nfunction renderPosts(images, firstTime = false) {\n  const htmlString = images\n    .map(\n      ({\n        previewURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"list-item-sp\"><a class=\"link\" href=\"${largeImageURL}\"><div class=\"card-image\"><img src=\"${previewURL}\" alt=\"${tags}\" width=\"360\" height=\"300\"/></div><div class=\"info-data\"><ul class=\"list details-list\"><li class=\"image-detail\"><span>Likes</span><br><span>${likes}</span></li><li class=\"image-detail\"><span>Comments</span><br><span>${comments}</span></li><li class=\"image-detail\"><span>Views</span><br><span>${views}</span></li><li class=\"image-detail\"><span>Downloads</span><br><span>${downloads}</span></div></li></ul></div></a></li>`;\n      }\n    )\n    .join('');\n\n  if (firstTime) {\n    containerGallery.innerHTML = htmlString;\n  } else containerGallery.insertAdjacentHTML('beforeend', htmlString);\n  galleryLightbox.refresh();\n  fetchButton.classList.remove('hidden');\n  // const nodes = document.querySelectorAll('.list-item-sp');\n  // console.log(nodes[nodes.length - 1].getBoundingClientRect().y);\n\n  window.scrollTo(0, containerGallery.getBoundingClientRect().height);\n}\n"],"names":["api","form","searchbox","fetchButton","loader","loaderAlt","containerGallery","searchString","searchStringProcessed","page","perPage","evt","galleryLightbox","SimpleLightbox","resetImages","imagesToRemove","imageToRemove","updateStatus","totalHits","iziToast","updateInterface","fetchImages","images","renderPosts","error","axios","firstTime","htmlString","previewURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"wyBAKA,MAAMA,EAAM,oCACNC,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAY,SAAS,eAAe,WAAW,EAC/CC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAmB,SAAS,cAAc,iBAAiB,EACjE,IAAIC,EAAe,GACfC,EAAwB,GACxBC,EAAO,EACPC,EAAU,GAEdR,EAAU,iBAAiB,QAASS,GAAO,CACzCJ,EAAeI,EAAI,OAAO,MAAM,KAAI,CACtC,CAAC,EAED,MAAMC,EAAkB,IAAIC,EAAe,kBAAmB,CAC5D,WAAY,GACZ,aAAc,MACd,aAAc,GAChB,CAAC,EAEKC,EAAc,IAAM,CACxBL,EAAO,EACP,MAAMM,EAAiB,SAAS,iBAAiB,eAAe,EAC5DA,EAAe,OAAS,GAC1BA,EAAe,QAAQC,GAAiB,CACtCA,EAAc,OAAM,CAC1B,CAAK,CAEL,EAEMC,EAAeC,GAAa,CAC5BA,GAAaR,EAAUD,GACzBU,EAAS,MAAM,CACb,MAAO,QACP,QAAS,gEACf,CAAK,EAEHV,GACF,EAEMW,EAAkB,IAAM,CAC5BhB,EAAO,UAAU,IAAI,QAAQ,EAC7BC,EAAU,UAAU,IAAI,QAAQ,CAClC,EAcAJ,EAAK,iBAAiB,SAAUU,GAAO,CACrCA,EAAI,eAAc,EACdJ,EAAa,OAAS,GACxBO,IACAV,EAAO,UAAU,OAAO,QAAQ,EAChCI,EAAwBD,EAAa,WAAW,IAAK,GAAG,EAExDc,EAAa,EACV,KAAKC,GAAU,CACdF,IACIE,EAAO,KAAK,OAAS,GACvBL,EAAaK,EAAO,SAAS,EAC7BC,EAAYD,EAAO,KAAM,EAAI,GAE7BH,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACd,CAAW,CAEX,CAAO,EACA,MAAMK,GAAS,CACdJ,IACA,QAAQ,IAAII,CAAK,CACzB,CAAO,GAEHL,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACR,CAAK,CAEL,CAAC,EAEDhB,EAAY,iBAAiB,QAASQ,GAAO,CAC3CA,EAAI,eAAc,EAClBN,EAAU,UAAU,OAAO,QAAQ,EACnCF,EAAY,UAAU,IAAI,QAAQ,EAClCkB,EAAa,EACV,KAAKC,GAAU,CACdF,IACIE,EAAO,KAAK,OAAS,GACvBL,EAAaK,EAAO,SAAS,EAC7BC,EAAYD,EAAO,IAAI,GAEvBH,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACZ,CAAS,CAET,CAAK,EACA,MAAMK,GAAS,CACdJ,IACA,QAAQ,IAAII,CAAK,CACvB,CAAK,CACL,CAAC,EAED,MAAMH,EAAc,UACD,MAAMI,EAAM,IAC3B,gCAAgCzB,CAAG,MAAMQ,CAAqB,qEAAqEE,CAAO,SAASD,CAAI,EAC3J,GACkB,KAGlB,SAASc,EAAYD,EAAQI,EAAY,GAAO,CAC9C,MAAMC,EAAaL,EAChB,IACC,CAAC,CACC,WAAAM,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe,kDAAkDL,CAAa,uCAAuCD,CAAU,UAAUE,CAAI,+IAA+IC,CAAK,uEAAuEE,CAAQ,oEAAoED,CAAK,wEAAwEE,CAAS,wCAErgB,EACA,KAAK,EAAE,EAENR,EACFpB,EAAiB,UAAYqB,EACxBrB,EAAiB,mBAAmB,YAAaqB,CAAU,EAClEf,EAAgB,QAAO,EACvBT,EAAY,UAAU,OAAO,QAAQ,EAIrC,OAAO,SAAS,EAAGG,EAAiB,sBAAqB,EAAG,MAAM,CACpE"}